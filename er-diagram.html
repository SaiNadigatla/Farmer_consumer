<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AgriNest - Database Schema & ER Diagram</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; color: #333; }
    .container { max-width: 1400px; margin: 0 auto; background: white; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
    header { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 40px; text-align: center; }
    header h1 { font-size: 2.5rem; margin-bottom: 10px; }
    .content { padding: 40px; }
    h2 { color: #1e3c72; margin: 30px 0 20px 0; padding-bottom: 10px; border-bottom: 3px solid #667eea; font-size: 1.8rem; }
    .table-card { background: #f8f9fa; border: 2px solid #e1e8ed; border-radius: 12px; padding: 20px; margin-bottom: 25px; }
    .table-card h3 { color: #2a5298; font-size: 1.3rem; margin-bottom: 10px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; background: white; }
    th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px; text-align: left; font-weight: 600; font-size: 0.9rem; }
    td { padding: 8px 10px; border-bottom: 1px solid #e1e8ed; font-size: 0.85rem; }
    tr:nth-child(even) { background: #f8f9fa; }
    .primary-key { background: #ffd700; color: #333; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; }
    .foreign-key { background: #4CAF50; color: white; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; }
    .unique { background: #2196F3; color: white; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; }
    .er-diagram { background: white; border: 2px solid #e1e8ed; border-radius: 12px; padding: 20px; margin: 20px 0; overflow-x: auto; }
    .relationships { background: #fff3cd; border-left: 4px solid #ffc107; padding: 20px; margin: 20px 0; border-radius: 8px; }
    .relationships h3 { color: #856404; margin-bottom: 15px; }
    .relationships ul { list-style: none; padding-left: 0; }
    .relationships li { padding: 6px 0; color: #856404; font-weight: 500; font-size: 0.9rem; }
    .relationships li:before { content: "â†’ "; color: #ffc107; font-weight: bold; margin-right: 8px; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ðŸŒ¾ AgriNest Database Schema</h1>
      <p>Complete Database Structure & Entity-Relationship Diagram</p>
    </header>

    <div class="content">
      <div class="section">
        <h2>ðŸ“Š Entity-Relationship Diagram</h2>
        <div class="er-diagram">
          <svg width="100%" height="700" viewBox="0 0 1100 700" xmlns="http://www.w3.org/2000/svg">
            <rect x="30" y="30" width="220" height="160" fill="#667eea" rx="8"/><text x="140" y="55" text-anchor="middle" fill="white" font-size="16" font-weight="bold">user_credentials</text><line x1="30" y1="65" x2="250" y2="65" stroke="white" stroke-width="2"/><text x="40" y="85" fill="white" font-size="12">ðŸ”‘ id (PK)</text><text x="40" y="105" fill="white" font-size="12">name, email, password</text><text x="40" y="125" fill="white" font-size="12">role (farmer/consumer)</text><text x="40" y="145" fill="white" font-size="12">created_at</text>
            <rect x="400" y="30" width="220" height="160" fill="#764ba2" rx="8"/><text x="510" y="55" text-anchor="middle" fill="white" font-size="16" font-weight="bold">crops</text><line x1="400" y1="65" x2="620" y2="65" stroke="white" stroke-width="2"/><text x="410" y="85" fill="white" font-size="12">ðŸ”‘ id (PK)</text><text x="410" y="105" fill="white" font-size="12">crop_name, quantity</text><text x="410" y="125" fill="white" font-size="12">location, price, image</text><text x="410" y="145" fill="white" font-size="12">ðŸ”— farmer_id (FK)</text><text x="410" y="165" fill="white" font-size="12">created_at</text>
            <rect x="30" y="250" width="220" height="130" fill="#10b981" rx="8"/><text x="140" y="275" text-anchor="middle" fill="white" font-size="16" font-weight="bold">cart</text><line x1="30" y1="285" x2="250" y2="285" stroke="white" stroke-width="2"/><text x="40" y="305" fill="white" font-size="12">ðŸ”‘ id (PK)</text><text x="40" y="325" fill="white" font-size="12">ðŸ”— user_id, crop_id (FK)</text><text x="40" y="345" fill="white" font-size="12">quantity</text>
            <rect x="400" y="260" width="220" height="120" fill="#f59e0b" rx="8"/><text x="510" y="285" text-anchor="middle" fill="white" font-size="16" font-weight="bold">orders</text><line x1="400" y1="295" x2="620" y2="295" stroke="white" stroke-width="2"/><text x="410" y="315" fill="white" font-size="12">ðŸ”‘ id (PK)</text><text x="410" y="335" fill="white" font-size="12">ðŸ”— user_id (FK)</text><text x="410" y="355" fill="white" font-size="12">total, created_at</text>
            <rect x="770" y="260" width="220" height="120" fill="#ef4444" rx="8"/><text x="880" y="285" text-anchor="middle" fill="white" font-size="16" font-weight="bold">order_items</text><line x1="770" y1="295" x2="990" y2="295" stroke="white" stroke-width="2"/><text x="780" y="315" fill="white" font-size="12">ðŸ”‘ id (PK)</text><text x="780" y="335" fill="white" font-size="12">ðŸ”— order_id, crop_id (FK)</text><text x="780" y="355" fill="white" font-size="12">quantity, price</text>
            <rect x="770" y="70" width="220" height="130" fill="#3b82f6" rx="8"/><text x="880" y="95" text-anchor="middle" fill="white" font-size="16" font-weight="bold">crop_ratings</text><line x1="770" y1="105" x2="990" y2="105" stroke="white" stroke-width="2"/><text x="780" y="125" fill="white" font-size="12">ðŸ”‘ id (PK)</text><text x="780" y="145" fill="white" font-size="12">ðŸ”— user_id, crop_id (FK)</text><text x="780" y="165" fill="white" font-size="12">rating (1-5)</text>
            <line x1="250" y1="110" x2="400" y2="110" stroke="#333" stroke-width="2" marker-end="url(#a)"/><text x="325" y="100" text-anchor="middle" fill="#333" font-size="11" font-weight="bold">creates (1:N)</text>
            <line x1="140" y1="190" x2="140" y2="250" stroke="#333" stroke-width="2" marker-end="url(#a)"/><text x="160" y="225" fill="#333" font-size="11" font-weight="bold">has (1:N)</text>
            <line x1="510" y1="190" x2="510" y2="220" x2="250" y2="305" stroke="#333" stroke-width="2" marker-end="url(#a)"/><text x="380" y="235" text-anchor="middle" fill="#333" font-size="11" font-weight="bold">in (1:N)</text>
            <line x1="250" y1="170" x2="320" y2="240" x2="400" y2="300" stroke="#333" stroke-width="2" marker-end="url(#a)"/><text x="330" y="230" text-anchor="middle" fill="#333" font-size="11" font-weight="bold">places (1:N)</text>
            <line x1="620" y1="320" x2="770" y2="320" stroke="#333" stroke-width="2" marker-end="url(#a)"/><text x="695" y="310" text-anchor="middle" fill="#333" font-size="11" font-weight="bold">contains (1:N)</text>
            <line x1="620" y1="120" x2="700" y2="120" x2="700" y2="320" x2="770" y2="320" stroke="#333" stroke-width="2" marker-end="url(#a)"/><text x="715" y="220" fill="#333" font-size="11" font-weight="bold">ordered (1:N)</text>
            <line x1="250" y1="80" x2="770" y2="135" stroke="#333" stroke-width="2" marker-end="url(#a)"/><text x="510" y="100" text-anchor="middle" fill="#333" font-size="11" font-weight="bold">rates (1:N)</text>
            <line x1="620" y1="80" x2="770" y2="135" stroke="#333" stroke-width="2" marker-end="url(#a)"/><text x="695" y="100" text-anchor="middle" fill="#333" font-size="11" font-weight="bold">rated by (1:N)</text>
            <defs><marker id="a" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#333"/></marker></defs>
          </svg>
        </div>

        <div class="relationships">
          <h3>ðŸ”— Database Relationships</h3>
          <ul>
            <li><strong>user_credentials</strong> (1) â†’ (N) <strong>crops</strong> (A farmer lists multiple crops)</li>
            <li><strong>user_credentials</strong> (1) â†’ (N) <strong>cart</strong> (A user has multiple cart items)</li>
            <li><strong>crops</strong> (1) â†’ (N) <strong>cart</strong> (A crop can be in multiple carts)</li>
            <li><strong>user_credentials</strong> (1) â†’ (N) <strong>orders</strong> (A user places multiple orders)</li>
            <li><strong>orders</strong> (1) â†’ (N) <strong>order_items</strong> (An order contains multiple items)</li>
            <li><strong>crops</strong> (1) â†’ (N) <strong>order_items</strong> (A crop in multiple orders)</li>
            <li><strong>user_credentials</strong> (1) â†’ (N) <strong>crop_ratings</strong> (A user rates multiple crops)</li>
            <li><strong>crops</strong> (1) â†’ (N) <strong>crop_ratings</strong> (A crop has multiple ratings)</li>
          </ul>
        </div>
      </div>

      <div class="section">
        <h2>ðŸ“‹ Table Schemas</h2>

        <div class="table-card">
          <h3>1. user_credentials</h3>
          <p><strong>Purpose:</strong> Stores user accounts (farmers & consumers)</p>
          <table>
            <tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr>
            <tr><td>id</td><td>INT</td><td><span class="primary-key">PK</span> AUTO_INCREMENT</td><td>User ID</td></tr>
            <tr><td>name</td><td>VARCHAR(100)</td><td>NOT NULL</td><td>Full name</td></tr>
            <tr><td>email</td><td>VARCHAR(255)</td><td>NOT NULL <span class="unique">UNIQUE</span></td><td>Login email</td></tr>
            <tr><td>password</td><td>VARCHAR(255)</td><td>NOT NULL</td><td>Bcrypt hash</td></tr>
            <tr><td>role</td><td>ENUM</td><td>'farmer','consumer'</td><td>User type</td></tr>
            <tr><td>created_at</td><td>TIMESTAMP</td><td>DEFAULT NOW</td><td>Registration time</td></tr>
          </table>
        </div>

        <div class="table-card">
          <h3>2. crops</h3>
          <p><strong>Purpose:</strong> Stores crop/product listings</p>
          <table>
            <tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr>
            <tr><td>id</td><td>INT</td><td><span class="primary-key">PK</span> AUTO_INCREMENT</td><td>Crop ID</td></tr>
            <tr><td>crop_name</td><td>VARCHAR(100)</td><td>NOT NULL</td><td>Product name</td></tr>
            <tr><td>quantity</td><td>INT</td><td>NOT NULL</td><td>Available stock</td></tr>
            <tr><td>location</td><td>VARCHAR(255)</td><td>NOT NULL</td><td>Crop location</td></tr>
            <tr><td>price</td><td>DECIMAL(10,2)</td><td>NOT NULL</td><td>Price/unit</td></tr>
            <tr><td>image_url</td><td>VARCHAR(255)</td><td>NOT NULL</td><td>Image path</td></tr>
            <tr><td>farmer_id</td><td>INT</td><td><span class="foreign-key">FK</span> â†’ user_credentials</td><td>Owner farmer</td></tr>
            <tr><td>created_at</td><td>TIMESTAMP</td><td>DEFAULT NOW</td><td>Listed date</td></tr>
          </table>
        </div>

        <div class="table-card">
          <h3>3. cart</h3>
          <p><strong>Purpose:</strong> Shopping cart items</p>
          <table>
            <tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr>
            <tr><td>id</td><td>INT</td><td><span class="primary-key">PK</span> AUTO_INCREMENT</td><td>Cart item ID</td></tr>
            <tr><td>user_id</td><td>INT</td><td><span class="foreign-key">FK</span> â†’ user_credentials (CASCADE)</td><td>Consumer</td></tr>
            <tr><td>crop_id</td><td>INT</td><td><span class="foreign-key">FK</span> â†’ crops (CASCADE)</td><td>Product</td></tr>
            <tr><td>quantity</td><td>INT</td><td>DEFAULT 1</td><td>Item count</td></tr>
            <tr><td>created_at</td><td>TIMESTAMP</td><td>DEFAULT NOW</td><td>Added time</td></tr>
          </table>
        </div>

        <div class="table-card">
          <h3>4. orders</h3>
          <p><strong>Purpose:</strong> Order records</p>
          <table>
            <tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr>
            <tr><td>id</td><td>INT</td><td><span class="primary-key">PK</span> AUTO_INCREMENT</td><td>Order ID</td></tr>
            <tr><td>user_id</td><td>INT</td><td><span class="foreign-key">FK</span> â†’ user_credentials (CASCADE)</td><td>Buyer</td></tr>
            <tr><td>total</td><td>DECIMAL(10,2)</td><td>DEFAULT 0</td><td>Total amount</td></tr>
            <tr><td>created_at</td><td>TIMESTAMP</td><td>DEFAULT NOW</td><td>Order time</td></tr>
          </table>
        </div>

        <div class="table-card">
          <h3>5. order_items</h3>
          <p><strong>Purpose:</strong> Items in each order</p>
          <table>
            <tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr>
            <tr><td>id</td><td>INT</td><td><span class="primary-key">PK</span> AUTO_INCREMENT</td><td>Item ID</td></tr>
            <tr><td>order_id</td><td>INT</td><td><span class="foreign-key">FK</span> â†’ orders (CASCADE)</td><td>Parent order</td></tr>
            <tr><td>crop_id</td><td>INT</td><td><span class="foreign-key">FK</span> â†’ crops (RESTRICT)</td><td>Product</td></tr>
            <tr><td>quantity</td><td>INT</td><td>NOT NULL</td><td>Ordered qty</td></tr>
            <tr><td>price</td><td>DECIMAL(10,2)</td><td>NOT NULL</td><td>Price at order</td></tr>
          </table>
        </div>

        <div class="table-card">
          <h3>6. crop_ratings</h3>
          <p><strong>Purpose:</strong> Product ratings by users</p>
          <table>
            <tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr>
            <tr><td>id</td><td>INT</td><td><span class="primary-key">PK</span> AUTO_INCREMENT</td><td>Rating ID</td></tr>
            <tr><td>user_id</td><td>INT</td><td><span class="foreign-key">FK</span> â†’ user_credentials (CASCADE)</td><td>Rater</td></tr>
            <tr><td>crop_id</td><td>INT</td><td><span class="foreign-key">FK</span> â†’ crops (CASCADE)</td><td>Rated product</td></tr>
            <tr><td>rating</td><td>TINYINT</td><td>CHECK (1-5)</td><td>Star rating</td></tr>
            <tr><td>created_at</td><td>TIMESTAMP</td><td>DEFAULT NOW</td><td>Rating time</td></tr>
            <tr><td>updated_at</td><td>TIMESTAMP</td><td>ON UPDATE NOW</td><td>Last update</td></tr>
          </table>
        </div>
      </div>

      <div style="background: #e7f3ff; border-left: 4px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
        <h3 style="color: #1565c0; margin-bottom: 15px;">ðŸ’¡ Key Database Features</h3>
        <ul style="list-style: none; padding-left: 0;">
          <li style="padding: 5px 0;">âœ… <strong>Referential Integrity:</strong> Foreign keys with CASCADE/RESTRICT deletion</li>
          <li style="padding: 5px 0;">âœ… <strong>Data Validation:</strong> ENUM types, CHECK constraints, UNIQUE keys</li>
          <li style="padding: 5px 0;">âœ… <strong>Timestamps:</strong> Auto-tracking for created_at and updated_at</li>
          <li style="padding: 5px 0;">âœ… <strong>Security:</strong> Bcrypt password hashing</li>
          <li style="padding: 5px 0;">âœ… <strong>Performance:</strong> InnoDB engine with proper indexing</li>
        </ul>
      </div>

    </div>
  </div>
</body>
</html>
